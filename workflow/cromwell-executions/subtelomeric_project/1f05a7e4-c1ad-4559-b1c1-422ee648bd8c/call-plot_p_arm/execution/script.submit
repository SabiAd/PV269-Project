#!/bin/bash
# make sure there is no preexisting Docker CID file
rm -f /Users/sabinaadamova/Desktop/project/subtelomere_project/workflow/cromwell-executions/subtelomeric_project/1f05a7e4-c1ad-4559-b1c1-422ee648bd8c/call-plot_p_arm/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /Users/sabinaadamova/Desktop/project/subtelomere_project/workflow/cromwell-executions/subtelomeric_project/1f05a7e4-c1ad-4559-b1c1-422ee648bd8c/call-plot_p_arm/execution/docker_cid \
  -i \
   \
  --entrypoint /bin/bash \
  -v /Users/sabinaadamova/Desktop/project/subtelomere_project/workflow/cromwell-executions/subtelomeric_project/1f05a7e4-c1ad-4559-b1c1-422ee648bd8c/call-plot_p_arm:/cromwell-executions/subtelomeric_project/1f05a7e4-c1ad-4559-b1c1-422ee648bd8c/call-plot_p_arm:delegated \
  python@sha256:193fdd0bbcb3d2ae612bd6cc3548d2f7c78d65b549fcaa8af75624c47474444d /cromwell-executions/subtelomeric_project/1f05a7e4-c1ad-4559-b1c1-422ee648bd8c/call-plot_p_arm/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait `cat /Users/sabinaadamova/Desktop/project/subtelomere_project/workflow/cromwell-executions/subtelomeric_project/1f05a7e4-c1ad-4559-b1c1-422ee648bd8c/call-plot_p_arm/execution/docker_cid`)

# remove the container after waiting
docker rm `cat /Users/sabinaadamova/Desktop/project/subtelomere_project/workflow/cromwell-executions/subtelomeric_project/1f05a7e4-c1ad-4559-b1c1-422ee648bd8c/call-plot_p_arm/execution/docker_cid`

# return exit code
exit $rc
